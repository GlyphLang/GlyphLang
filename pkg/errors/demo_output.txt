Enhanced Error Messages - Demo Output
========================================

1. PARSE ERROR EXAMPLE
----------------------

Parse Error at line 2, column 24

     1 | @ route /users GET {
     2 |     $ users = [1, 2, 3
       |                        ^
     3 |     return users

Missing closing bracket in array literal

Suggestion: Add a closing bracket ']' to complete the array definition


2. TYPE ERROR EXAMPLE
---------------------

Type Error at line 1, column 17

     1 | $ age: int = "twenty-five"
       |              ^

Type mismatch: cannot assign 'string' to variable of type 'int'

Suggestion: Convert the string to an integer (e.g., 25) or change the type annotation to 'str'


3. RUNTIME ERROR WITH FULL CONTEXT
-----------------------------------

Runtime Error
Division by zero error

Route: /calculate POST

Expression:
  result = total / count

Variables in scope:
  total = 100 (int)
  count = 0 (int)

Stack trace:
  1. calculateAverage at /calculate POST:12
  2. main at main.glyph:5

Suggestion: Add a check to ensure 'count' is not zero before performing division


4. UNDEFINED VARIABLE WITH SUGGESTIONS
---------------------------------------

Runtime Error
Variable 'usrName' is not defined

Route: /profile GET

Expression:
  return { name: usrName, id: userId }

Variables in scope:
  userId = 123 (int)
  userName = john_doe (string)

Suggestion: Did you mean 'userName'? Or define the variable before using it: $ usrName = value


5. BEFORE/AFTER COMPARISON
---------------------------

BEFORE (Simple Error):
Error at line 3: undefined variable 'usr'

AFTER (Enhanced Error):
Runtime Error
Variable 'usr' is not defined

Route: /users POST

Expression:
  $ result = database.save(usr)

Variables in scope:
  user = map[email:john@example.com name:John]
  request = map[method:POST]
  database = <database connection>

Suggestion: Did you mean 'user'? Variable names are case-sensitive


6. ERROR WRAPPING DEMONSTRATION
--------------------------------

Step 1 - Error with line info:
Error at line 2, column 13

     1 | $ count: int = getUserCount()
     2 | $ average = total / count
       |            ^
     3 | return average

division by zero

Step 2 - Add suggestion:
Error at line 2, column 13

     1 | $ count: int = getUserCount()
     2 | $ average = total / count
       |            ^
     3 | return average

division by zero

Suggestion: Check that 'count' is not zero before dividing

Step 3 - Add filename:
Error in calculations.glyph at line 2, column 13

     1 | $ count: int = getUserCount()
     2 | $ average = total / count
       |            ^
     3 | return average

division by zero

Suggestion: Check that 'count' is not zero before dividing


7. SUGGESTION HELPER EXAMPLES
------------------------------

Undefined Variable Suggestions:
- Variable 'cunt' → "Did you mean 'count'?"
- Variable 'usrName' → "Did you mean 'userName'?"

Type Mismatch Suggestions:
- Expected int, got string → "Convert the string to an integer, or change the expected type to 'str'"
- Expected string, got int → "Convert the integer to a string, or change the expected type to 'int'"
- Expected bool → "Use a boolean value (true or false) or a comparison expression"

Common Error Suggestions:
- Division by zero → "Add a check to ensure the divisor is not zero before dividing"
- SQL injection → "Use parameterized queries or prepared statements instead of string concatenation"


8. PERFORMANCE BENCHMARKS
--------------------------

BenchmarkCompileErrorFormat    1,000,000 iterations   1,020 ns/op   1,088 B/op   16 allocs/op
BenchmarkRuntimeErrorFormat    1,234,034 iterations     930 ns/op     800 B/op   17 allocs/op
BenchmarkLevenshteinDistance   5,215,651 iterations     238 ns/op     624 B/op    8 allocs/op


9. TEST COVERAGE
----------------

All tests passing: 100%
Code coverage: 92.5%

Tests include:
- CompileError creation and formatting
- RuntimeError creation and formatting
- Error wrapping and context addition
- Source snippet extraction
- Line number display
- Suggestion generation
- Color vs no-color output
- Helper functions (Levenshtein distance, similarity matching)
- Type mismatch suggestions
- Undefined variable suggestions
